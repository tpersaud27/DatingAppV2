<div class="inbox-container">
  <!-- Conversations -->
  <mat-nav-list class="conversation-list">
    @for(conversation of conversations(); track conversation.id;){
    <mat-list-item
      (click)="selectConversation(conversation)"
      [class.active]="conversation.id === selectedConversation()?.id"
    >
      <div matLine class="title">
        {{ conversation.otherUserDisplayName }}
        <span class="presence online"></span>
      </div>

      <div matLine class="preview">
        {{ conversation.lastMessage.content || 'No messages yet' }}
      </div>

      <div class="timestamp">
        {{ conversation.lastMessage.messageSent | date : 'shortTime' }}
      </div>
    </mat-list-item>
    }
  </mat-nav-list>

  <!-- message-thread -->
  <div class="thread">
    @if(selectedConversation()?.id) {
    <app-message-thread
      [conversationId]="selectedConversation()?.id"
      [recipientId]="selectedConversation()?.otherUserId"
    ></app-message-thread>
    } @else {
    <div class="empty">Select a conversation</div>
    }
  </div>
</div>
